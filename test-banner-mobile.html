<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Install Banner</title>
    <link rel="stylesheet" href="style21.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { padding: 20px; font-family: Arial; }
        .test-box { background: white; padding: 20px; margin: 20px 0; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #667eea; }
        .btn { background: #667eea; color: white; border: none; padding: 15px 30px; border-radius: 8px; font-size: 16px; margin: 10px 5px; cursor: pointer; }
        .btn:active { background: #5568d3; }
        .success { background: #d1fae5; color: #065f46; padding: 15px; border-radius: 8px; margin: 10px 0; }
        .info { background: #dbeafe; color: #1e3a8a; padding: 15px; border-radius: 8px; margin: 10px 0; }
        code { background: #1e293b; color: #e2e8f0; padding: 3px 8px; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="test-box">
        <h1>üì± Banner Animation Test</h1>
        <p>This page tests if the install banner will slide up correctly on mobile.</p>
        
        <h2>Current Device</h2>
        <div id="deviceInfo"></div>
        
        <h2>Test Actions</h2>
        <button onclick="showBannerTest()" class="btn">Show Banner (Test Animation)</button>
        <button onclick="hideBannerTest()" class="btn" style="background: #ef4444;">Hide Banner</button>
        <button onclick="simulateLogin()" class="btn" style="background: #10b981;">Simulate Login Flow</button>
        
        <div class="info" style="margin-top: 20px;">
            <strong>Instructions:</strong><br>
            1. Click "Simulate Login Flow" to test exactly what happens after login<br>
            2. Open browser console (F12) to see debug messages<br>
            3. The banner should slide up from the bottom of the screen
        </div>
    </div>
    
    <!-- PWA Install Banner (same as dashboard) -->
    <div id="pwaInstallBanner" class="pwa-install-banner">
        <button class="pwa-banner-close" id="closePWABanner">&times;</button>
        <div class="pwa-banner-content">
            <div class="pwa-banner-icon">
                <i class="fas fa-mobile-alt"></i>
            </div>
            <div class="pwa-banner-text">
                <h4>Install Cash Book App</h4>
                <p>Add to your home screen for quick access and offline use!</p>
            </div>
            <button class="pwa-banner-install" id="installPWABanner">
                <i class="fas fa-download"></i> Install
            </button>
        </div>
    </div>
    
    <script>
        // Show device info
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
        
        document.getElementById('deviceInfo').innerHTML = `
            <div class="success">
                <strong>User Agent:</strong> ${navigator.userAgent}<br><br>
                <strong>Is Mobile:</strong> ${isMobile ? '‚úÖ YES' : '‚ùå NO'}<br>
                <strong>Is iOS:</strong> ${isIOS ? '‚úÖ YES' : '‚ùå NO'}<br>
                <strong>Is Android:</strong> ${/Android/i.test(navigator.userAgent) ? '‚úÖ YES' : '‚ùå NO'}
            </div>
        `;
        
        // Test banner show
        function showBannerTest() {
            const banner = document.getElementById('pwaInstallBanner');
            console.log('üß™ Testing banner show...');
            console.log('Banner element:', banner);
            console.log('Current classes:', banner.className);
            console.log('Current bottom style:', window.getComputedStyle(banner).bottom);
            
            // Add show class
            banner.classList.add('show');
            
            console.log('‚úÖ Added .show class');
            console.log('New classes:', banner.className);
            
            setTimeout(() => {
                console.log('Final bottom style:', window.getComputedStyle(banner).bottom);
            }, 600);
        }
        
        // Test banner hide
        function hideBannerTest() {
            const banner = document.getElementById('pwaInstallBanner');
            console.log('üß™ Hiding banner...');
            banner.classList.remove('show');
            console.log('‚úÖ Removed .show class');
        }
        
        // Simulate login flow
        function simulateLogin() {
            console.log('üîÑ Simulating login flow...');
            
            // Set the login flag
            sessionStorage.setItem('just_logged_in', 'true');
            console.log('‚úÖ Set just_logged_in flag');
            
            // Simulate what happens on dashboard
            setTimeout(() => {
                const isJustLoggedIn = sessionStorage.getItem('just_logged_in') === 'true';
                console.log('üì± Checking login status:', isJustLoggedIn);
                
                if (isMobile && isJustLoggedIn) {
                    console.log('üì± ‚úÖ Conditions met - SHOWING BANNER!');
                    sessionStorage.removeItem('just_logged_in');
                    showBannerTest();
                } else {
                    console.log('‚ùå Conditions not met:', {isMobile, isJustLoggedIn});
                }
            }, 100);
        }
        
        // Handle close button
        document.getElementById('closePWABanner').addEventListener('click', function() {
            hideBannerTest();
        });
    </script>
</body>
</html>

